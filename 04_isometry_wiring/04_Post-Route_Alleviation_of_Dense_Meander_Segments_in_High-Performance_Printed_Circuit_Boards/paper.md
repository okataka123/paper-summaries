# Post-Route Alleviation of Dense Meander Segments in High-Performance Printed Circuit Boards

## 要旨(Abstruct)
配線長の一致は、高性能プリント基板（PCB）配線においてバス信号の遅延を均衡させるための重要な技術である。しかし既存の配線ツールでは、距離の短い高密度な蛇行配線が生成される可能性がある。同一配線内の蛇行セグメント間で生じるクロストークにより、これらの蛇行セグメントを通過する信号に加速効果が生じ、物理的な配線長が同じであっても信号到達時刻の不一致が発生する。本論文では、蛇行セグメントの幅と間隔を拡大し、より均等に基板上へ分布させてクロストークを低減する後処理手法を提案する。提案するフレームワークでは、初期配線から高密度蛇行セグメントを除去した後の利用可能な配線領域の共有組合せと、緩和された蛇行セグメントおよびそのグループの生成をモデル化する。その後、このモデルを整数線形計画（ILP）問題に変換して効率的に解く。実験結果により、非常に厳しい面積制約下でも蛇行セグメントの幅と間隔を約2倍に拡大できることが示され、クロストークおよびそれに起因する加速効果を効果的に緩和できることが明らかになった。

---
## I. Introduction
高性能プリント基板（PCB）において、バス信号間の遅延整合は主要な問題となっており、これは現代のPCB配線ツールにおいても考慮されている [1]–[4]。文献 [1] では、ラグランジュモデルを用いて配線の蛇行領域へのリソース割り当てによって遅延整合問題を解決している。文献 [2] では、傾斜対称グリッドを用いることでこの問題に対処している。文献 [3] では、この長さ整合の課題を領域割り当て問題に変換し、境界なしスライスライングリッドを用いたグリッドレスのフレームワークを提案している。文献 [4] では、配線長や配線形状の整合を考慮しつつ、配線資源を効率的に使用する設計の配線が実現されている。これらの手法では、十分な長さを持たない配線に対し、配線中に蛇行パターンを作成することで長さを拡張する。このような蛇行パターンは、高い配線密度を持ち、比較的容易にモデル化可能であるため、広く用いられている。図1は、このような蛇行パターン（以後「蛇行セグメント」と呼ぶ）およびそれを連結した配線の例を示している。図中のNEおよびFEは、それぞれ近端（near end）および遠端（far end）を示す略語である。

蛇行セグメントが遅延補償手段として採用されることに伴い、これらの遅延特性に関する研究も多く行われてきた [5]–[8]。文献 [5] では、蛇行セグメント間のクロストークノイズが高速度設計において累積効果を持ち、配線に加速効果が現れる可能性があることが示されている。文献 [6] では、蛇行セグメントを持つ配線の遅延を近似するためのモーメント手法が提案され、文献 [7] では、有限差分時間領域法によるこうした遅延ラインの定性的予測が行われている。さらに文献 [8] では、一定形状の配線における蛇行セグメント数を調整することで配線遅延を制御する線形モデルが提案されている。

文献 [5]–[8] によれば、信号が蛇行セグメントを通過すると、同一配線内のセグメント間で発生するクロストークが徐々に蓄積される。その結果、信号は物理的な配線長による予測よりも早くシンク側ピンに到達する可能性があり、バス信号間で遅延の不整合を引き起こす。図1のように9つの配線セグメントを持つパターンを考える。時刻0において、主信号が配線1の近端で切り替わり、下から上に伝搬する。この信号は他の配線セグメントの近端でクロストーク信号を励起する。ある配線セグメントの近端から次のセグメントの遠端まで、あるいは遠端から他の近端までの信号伝搬時間を$t_d$とする。時刻$t_d$に、主信号は配線2の遠端に到達し、新たなクロストーク電圧を励起する。この電圧は、時刻0に主信号が励起したクロストーク信号に重ね合わされ、同じく時刻$t_d$に配線3の遠端に到達する。この重ね合わせのプロセスは、主信号が各配線セグメントを通過するたびに続き、最終的にはクロストーク電圧が論理スイッチングの閾値を主信号よりも早く超える可能性がある。これにより、配線上で加速効果が生じる。

蛇行セグメント間のクロストークノイズにもかかわらず、これらは [1]–[4] に見られるようなフロアプラン型または領域割り当て型の配線手法において広く使用されている。というのも、蛇行セグメントは比較的容易に適用でき、配線長を一致させる手段として柔軟に調整可能だからである。一方、平坦な渦巻き型遅延ライン [9] や同心円型遅延ライン [7] といった他の補償パターンは、計算量が多く、特に既存の商用ツールではまだ広く利用されていない。

本論文の主な貢献は、あるサブ領域における蛇行パターンおよび複数配線グループによる空間共有の数学的モデル化、ならびに、元の配線から高密度蛇行セグメントを削除した後に配線長を補償するために新たに作成される蛇行セグメントの幅を最大化する反復アルゴリズムの提案である。本手法によって得られる配線は、形状は元の配線と類似しており、配線長も同一だが、蛇行セグメントの幅が拡張されている。この処理を経ることで、配線遅延を配線長に基づいて見積もることが可能になり、遅延整合の精度が向上する。また、提案手法は、基本的な配線パターンと配線長がすでに決定された状態の他の配線ツールの結果に後処理として適用できるため、既存のPCB設計フローにシームレスに統合可能である。

---
## II. PROBLEM FORMULATION（問題定式化）
高性能プリント基板（PCBs）における高密度蛇行セグメントによるスピードアップ効果、ひいてはバス信号の遅延不整合を回避・緩和するために、さまざまな方法が用いられ得る。

直感的な方法としては、配線長を延ばして遅延を一致させることである。しかし、この直接的な解決策は、配線遅延を正確に評価できることを前提としており、蛇行セグメントの数や形状が異なることを考慮すると、それは容易ではない。

別の方法として、異なる高さを持つ蛇行セグメントを形成し、クロストーク信号が整列して蓄積しないようにする手法がある。しかしこの方法は、信号伝搬に対して綿密な検討が必要であり、配線後の変更に対して非常に敏感である。

本論文では、蛇行セグメントの幅、すなわちパターンを構成する配線間の距離を拡大することにより、スピードアップ効果を緩和しようと試みる。この方法の基本的な考え方は、元の配線から高密度蛇行セグメントを削除し、空いた空間を用いて新たな蛇行パターンを形成し、配線長を補償することにある。

与えられた配線において既存の蛇行セグメントの幅を単純に拡張するだけでは、複数の配線が利用可能な空間を競合する状況において最適とは限らない。そのため、本手法では、同じ自由空間を複数の蛇行セグメントが共有する場合や、サブ領域における配線パターンを数学的にモデル化する。その後、このモデルを整数線形計画（ILP）問題へと変換し、ソルバによって新たな緩和された蛇行セグメントの生成を全体的に最適化する。また、繰り返しアルゴリズムを用いて、蛇行セグメントの可能な限り最大の幅を求める。

提案手法の入力は、元のPCB配線および、後処理で生成される配線セグメントが制限される面積制約である。出力は、改善されたPCB配線であり、提案手法の目的は、元の配線長や面積制約を変えることなく、可能な限り高密度な蛇行セグメントの幅を拡大することである。

---
## III. ALLEVIATION OF MEANDER SEGMENTS（蛇行セグメントの緩和）
本節では、与えられた配線において蛇行セグメントの幅を拡大するために提案する手法を説明する。提案するフレームワークは、サブ領域におけるパターンの数学的モデル化と、複数の配線グループによる空間共有の記述を含む。また、与えられた面積制約を守りつつ、任意の2配線間の距離が製造上必要な最小距離$d_m$より大きいことを保証した上で、新たに生成される蛇行セグメントの幅$w_t$を可能な限り最大化する反復アルゴリズムを含む。

### A. 